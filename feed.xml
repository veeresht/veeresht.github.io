<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://veeresht.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://veeresht.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2024-12-27T07:56:21+00:00</updated><id>https://veeresht.github.io/feed.xml</id><title type="html">blank</title><subtitle>A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra</title><link href="https://veeresht.github.io/blog/2024/google-gemini-updates-flash-15-gemma-2-and-project-astra/" rel="alternate" type="text/html" title="Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra"/><published>2024-05-14T00:00:00+00:00</published><updated>2024-05-14T00:00:00+00:00</updated><id>https://veeresht.github.io/blog/2024/google-gemini-updates-flash-15-gemma-2-and-project-astra</id><content type="html" xml:base="https://veeresht.github.io/blog/2024/google-gemini-updates-flash-15-gemma-2-and-project-astra/"><![CDATA[]]></content><author><name></name></author><summary type="html"><![CDATA[Weâ€™re sharing updates across our Gemini family of models and a glimpse of Project Astra, our vision for the future of AI assistants.]]></summary></entry><entry><title type="html">Displaying External Posts on Your al-folio Blog</title><link href="https://veeresht.github.io/blog/2022/displaying-external-posts-on-your-al-folio-blog/" rel="alternate" type="text/html" title="Displaying External Posts on Your al-folio Blog"/><published>2022-04-23T23:20:09+00:00</published><updated>2022-04-23T23:20:09+00:00</updated><id>https://veeresht.github.io/blog/2022/displaying-external-posts-on-your-al-folio-blog</id><content type="html" xml:base="https://veeresht.github.io/blog/2022/displaying-external-posts-on-your-al-folio-blog/"><![CDATA[]]></content><author><name></name></author></entry><entry><title type="html">a post with code</title><link href="https://veeresht.github.io/blog/2012/carrier-frequency-offset-ofdm/" rel="alternate" type="text/html" title="a post with code"/><published>2012-04-02T15:00:00+00:00</published><updated>2012-04-02T15:00:00+00:00</updated><id>https://veeresht.github.io/blog/2012/carrier-frequency-offset-ofdm</id><content type="html" xml:base="https://veeresht.github.io/blog/2012/carrier-frequency-offset-ofdm/"><![CDATA[<p>Carrier Frequency Offset (CFO) is one of the most common impairments found in a communication system. As the name suggests, it is due to the mismatch between the carrier frequencies used by the transmitter and the receiver. The effects produced by CFO on single carrier and OFDM systems is very different. To illustrate this, a simple simulation of a 64-QAM based single carrier and OFDM system using CommPy is shown below.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">numpy</span> <span class="kn">import</span> <span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">,</span> <span class="n">arange</span>
<span class="kn">from</span> <span class="n">numpy.fft</span> <span class="kn">import</span> <span class="n">fft</span><span class="p">,</span> <span class="n">ifft</span>
<span class="kn">from</span> <span class="n">numpy.random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="kn">from</span> <span class="n">commpy.modulation</span> <span class="kn">import</span> <span class="n">QAMModem</span>
<span class="kn">from</span> <span class="n">commpy.impairments</span> <span class="kn">import</span> <span class="n">add_frequency_offset</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="c1"># System Parameters 
# Sampling Frequency (Hz)
</span><span class="n">Fs</span> <span class="o">=</span> <span class="mf">15.36e6</span> 
<span class="c1"># Frequency Offset (Hz)
</span><span class="n">delta_f</span> <span class="o">=</span> <span class="mi">500</span>
<span class="c1"># FFT Size for OFDM 
</span><span class="n">N</span> <span class="o">=</span> <span class="mi">1024</span>

<span class="c1"># Generate message bits
</span><span class="n">msg_bits</span> <span class="o">=</span> <span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6144</span><span class="p">)</span>
<span class="c1"># 64-QAM Modulation of the message bits
</span><span class="n">qam64</span> <span class="o">=</span> <span class="nc">QAMModem</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>
<span class="n">tx_sc_symbols</span> <span class="o">=</span> <span class="n">qam64</span><span class="p">.</span><span class="nf">modulate</span><span class="p">(</span><span class="n">msg_bits</span><span class="p">)</span>
<span class="c1"># Add Frequency offset to the modulated symbols
</span><span class="n">rx_sc_symbols</span> <span class="o">=</span> <span class="nf">add_frequency_offset</span><span class="p">(</span><span class="n">tx_sc_symbols</span><span class="p">,</span> <span class="n">Fs</span><span class="p">,</span> <span class="n">delta_f</span><span class="p">)</span>

<span class="c1"># Ideal 64-QAM constellation
</span><span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="nf">real</span><span class="p">(</span><span class="n">tx_sc_symbols</span><span class="p">),</span> <span class="nf">imag</span><span class="p">(</span><span class="n">tx_sc_symbols</span><span class="p">),</span> <span class="sh">'</span><span class="s">.b</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">I-component</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Q-component</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xticks</span><span class="p">(</span><span class="nf">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">yticks</span><span class="p">(</span><span class="nf">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># 64-QAM constellation for Single Carrier with Frequency offset
</span><span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="nf">real</span><span class="p">(</span><span class="n">rx_sc_symbols</span><span class="p">),</span> <span class="nf">imag</span><span class="p">(</span><span class="n">rx_sc_symbols</span><span class="p">),</span> <span class="sh">'</span><span class="s">.b</span><span class="sh">'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">I-component</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Q-component</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xticks</span><span class="p">(</span><span class="nf">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">yticks</span><span class="p">(</span><span class="nf">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Generate OFDM signal (single symbol) using modulated symbols
</span><span class="n">tx_ofdm_waveform</span> <span class="o">=</span> <span class="nf">ifft</span><span class="p">(</span><span class="n">tx_sc_symbols</span><span class="p">)</span>
<span class="c1"># Add frequency offset to the OFDM signal
</span><span class="n">rx_ofdm_waveform</span> <span class="o">=</span> <span class="nf">add_frequency_offset</span><span class="p">(</span><span class="n">tx_ofdm_waveform</span><span class="p">,</span> <span class="n">Fs</span><span class="p">,</span> <span class="n">delta_f</span><span class="p">)</span>
<span class="c1"># OFDM Demodulation to extract the 64-QAM symbols
</span><span class="n">rx_ofdm_symbols</span> <span class="o">=</span> <span class="nf">fft</span><span class="p">(</span><span class="n">rx_ofdm_waveform</span><span class="p">)</span>

<span class="c1"># 64-QAM Constellation for OFDM with Frequency offset
</span><span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="nf">real</span><span class="p">(</span><span class="n">rx_ofdm_symbols</span><span class="p">),</span> <span class="nf">imag</span><span class="p">(</span><span class="n">rx_ofdm_symbols</span><span class="p">),</span> <span class="sh">'</span><span class="s">.b</span><span class="sh">'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">I-component</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Q-component</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xticks</span><span class="p">(</span><span class="nf">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">yticks</span><span class="p">(</span><span class="nf">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <p>We have to look at the received IQ symbols to study the effect of frequency offset. Shown below are the IQ-constellations generated during the simulation.</p> <p>As seen from the figures above, the constellation points are rotated by varying amounts in the case of a single carrier system whereas, in the case of an OFDM system the constellation points appear noisy. To answer the question of why this difference in the received constellation, we can do a mathematical analysis of the both the systems as follows.</p> <h3 id="assumptions-and-parameters">Assumptions and Parameters</h3> <p>Ideal System with frequency offset as the only impairment<br/> Modulation Scheme : 64-QAM<br/> Sampling Frequency (\(F_s\)) : 15.36 MHz<br/> FFT Size in OFDM : 1024 subcarriers<br/> Number of Bits : 6144 (equivalent to 1024 64-QAM symbols)</p> <h3 id="single-carrier-system">Single Carrier System</h3> <p>Let us denote, the 64-QAM modulated IQ symbols at the transmitter by $x(n)$, the 64-QAM modulated IQ symbols at the receiver by $r(n)$, the frequency offset (in Hz) introduced by $\Delta f$, the sampling frequency (in Hz) of the system by $F_s$.</p> <p>The relationship between \(r(n)\) and \(x(n)\) is expressed as \(r(n)=x(n) e^{j2\pi \Delta f n F_s}\) This can be further modified as</p> \[r(n)=A(n)e^{j\theta(n)}e^{j2\pi \Delta fn F_s}\] \[r(n)=A(n)e^{j(\theta(n)+j2\pi \Delta f n F_s)}\] <p>where $A(n)$ and $\theta(n)$ are the magnitude and the phase of the symbol $x(n)$ respectively. From these equations, it is clear that the frequency offset introduces varying amounts of phase offset depending on the time instant n of the modulated symbol $x(n)$. This explains the varying rotation of the received constellation points observed in Figure 2.</p> <h3 id="ofdm-system">OFDM System</h3> <p>Let us denote, the 64-QAM modulated IQ symbols at the transmitter by $X(k)$, the OFDM signal at the transmitter by $x(n)$, the OFDM signal at the receiver by $r(n)$, the 64-QAM modulated IQ symbols at the receiver by $R(k)$, the frequency offset (in Hz) introduced by $\Delta f$,the sampling frequency (in Hz) of the system by $ F_{s}$ , the sub-carrier spacing (in Hz) of the system by $\Delta f_c$, the number of subcarriers (size of the DFT/IDFT) by $N$.</p> <p>The OFDM signal is generated from the modulated symbols using a inverse Discrete Fourier Transform (IDFT) and is given by</p> \[x(n) = \sum_{n=0}^{N-1} X(k)e^{j2\pi k n N}\] <p>The relationship between $r(n)$ and $x(n)$ is expressed as</p> \[r(n) = x(n)e^{j2\pi\Delta f n F_s}\] <p>From the modulation property of the DFT and noting that $\Delta f_c = \frac{F_s}{N}$, we can express the received 64-QAM modulated symbols as</p> \[R(k) = X\bigg(kâˆ’\frac{\Delta f}{\Delta f_c}\bigg)\] <p>Thus the effect of the frequency offset is a change in the sampling instants of the modulated symbols. To express $R(k)$ in terms of $X(k)$, we invoke the Sampling theorem as follows. The continuous time representation $x(t)$ is given by,</p> \[x(t) = \sum_{k=-\infty}^{\infty} X(k) \frac{sin(\pi (2Wtâˆ’k))}{\pi (2Wtâˆ’k)}\] <p>where $W$ represents the baseband bandwidth of the signal. Therefore, $R(m)$ is given by</p> \[R(m) = X\bigg(mâˆ’\frac{\Delta f}{\Delta f_c}\bigg)\] \[R(m) = \sum_{k=-\infty}^{\infty} X(k)\frac{sin(\pi(\frac{2W}{F_s} (mâˆ’\frac{\Delta f}{\Delta f_c})âˆ’k))}{\pi(\frac{2W}{F_s} (mâˆ’\frac{\Delta f}{\Delta f_c})âˆ’k)}\] <p>Assuming $F_s = 2W$ to simplify the equation we have,</p> \[R(m) = \sum_{k=-\infty}^{\infty} X(k)\frac{sin(\pi (mâˆ’\frac{\Delta f}{\Delta f_c}âˆ’k))}{\pi(mâˆ’\frac{\Delta f}{\Delta f_c}âˆ’k)}\] <p>This equation shows us that every received IQ symbol is the sum of scaled versions of all the transmitted IQ symbols, the scaling factor depends on $m$, $k$ and the ratio $\frac{\Delta f}{\Delta f_c}$.</p> <p>The key point to note is that every IQ symbol (subcarrier) \(X(k)\) is a random variable (assuming the data is random) and hence the received IQ symbol \(R(m)\) is a sum of random variables which tends to a Gaussian random variable (by the Central Limit Theorem). This explains the observation in Figure 3, where the IQ constellation points appear to be affected by random noise. Since all the subcarriers interfere with the current subcarrier due to the CFO (loss of orthogonality), the effect of CFO on OFDM systems is commonly known by the term Inter-Carrier Interference (ICI).</p>]]></content><author><name></name></author><category term="communication"/><category term="theory"/><category term="and"/><category term="systems"/><category term="formatting"/><category term="code"/><summary type="html"><![CDATA[Observable effects of carrier frequency offset in OFDM systems v/s single carrier systems.]]></summary></entry></feed>